<!DOCTYPE html>
<html lang="en">

<style>
.line {
  fill: none;
  stroke: steelblue;
  stroke-width: 1.5px;
}

.circle {
  fill: none;
  stroke: steelblue;
  stroke-width: 1.5px;
}
</style>
<head>
	<title>Test</title>
	   <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
	   <script src="https://d3js.org/d3-timer.v1.min.js"></script> 
</head>

<body>
	<!-- Page elements and content go here. -->
	<body>

	<script>
	// SETUP
	
	var x1 = [2];
	var history = [[0,0],[20,30],[40,50]];
	var dat2 = [10,10,10,10,10,10,10,10,10,10,10];


	var w = 1000;
	var h = 400;
	var drawFlag = true
	var frameRate = 500
	var xMax = d3.max(x1, function(d) { return d;} ); 
	
	var svg = d3.select("body")
					.append("svg")
					.attr("width", w)
					.attr("height", h)
					.attr("style", "outline: thin solid black;");

	var points  = svg.selectAll("circle")
		   .data(x1)
		   .enter()
		   .append("circle")
		   .attr("cx", function(d) {return (d/xMax)*w; })
		   .attr("cy", function(d) {return 50.;})
		   .attr("r", 4);
		   

	    
	var lineFunction = d3.svg.line()
		.x(function(d) { return d[0]; })
 		.y(function(d) { return d[1]; })
		.interpolate("linear");
		
	var path = svg.append("path")
		 .attr("d", lineFunction(history))
		.attr("stroke", "blue")
		.attr("stroke-width", 2)
		.attr("fill", "none");
	
	// ANIMATE	
	var anim = d3.interval(function (elapsed) {if (drawFlag) {draw(elapsed);}},frameRate);
	

	function draw(elapsed) {
	
		// Take step in simulations 
		//x1.forEach(function(d) {
	    //	d = d + Math.floor(Math.random() *h)});
	    	

		x1[0]=x1[0] + (Math.random()-0.5)*50 ; 
		history.push([h,x1[0]])
		for(var i=0;i<dat.length;i++){
			dat[i]=dat[i] + (Math.random()-0.5)*50 ; 
			console.log(dat[i])

		
		// update point data
		points.data(x1);
		
		// animate step 
		points
 	 	.transition() 
		.duration(frameRate) 
		.ease("linear") 
		.attr("cy", function(d) {return d;})
	
	
		   
       
    }

</script>
	
</body>
</html>
